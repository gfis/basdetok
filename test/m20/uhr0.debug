0 CALL "ss %n,,,,,1"
5 CALL "pl %n la"
7 REM    "uhr0"
10 CLS:CLEAR:DIM TAGE(12),TAG$(7)
20 TAGE(1)=0:TAGE(2)=31:TAGE(3)=59:TAGE(4)=90:TAGE(5)=120:TAGE(6)=-105:TAGE(7)=-75:TAGE(8)=-44:TAGE(9)=-13:TAGE(10)=273:TAGE(11)=304:TAGE(12)=334
30 TAG$(1)="SONNTAG":TAG$(2)="MONTAG":TAG$(3)="DIENSTAG":TAG$(4)="MITTWOCH":TAG$(5)="DONNERSTAG":TAG$(6)="FREITAG":TAG$(7)="SAMSTAG"
40 CURSOR(28,3):PRINT"OLIVETTI BASIC INTERPRETER":LINE(-82,-31)-(338,-31)
50 CURSOR(21,7):PRINT"BETRIEBSSYSTEM                      PCOS"
60 CURSOR(21,9):PRINT"VERSION                         REL. 2.0"
80 CURSOR(21,11):PRINT"ANZAHL ZEICHEN BILDSCHIRM          80*25"
100 CURSOR(21,13):PRINT"FREIER SPEICHERPLATZ";:PRINT TAB(55);USING"######";{B ff}REM(0)
110 SCHALTER=2:LAENGE=6:SPALTE=21:ZEILE=18:TEXT$="":FRAGE$="BITTE UHRZEIT (HHMMSS) EIGEBEN ":GOSUB 500
115 IF TEXT$="      " THEN TEXT$={B ff}END(TIME$,2)+{B ff}NEXT(TIME$,4,2)+{B ff}FOR(TIME$,2):CURSOR(SPALTE,ZEILE):PRINT TEXT$;
120 STUNDE={B ff}NEW({B ff}END(TEXT$,2))
130 MINUTE={B ff}NEW({B ff}NEXT(TEXT$,3,2))
140 SEKUNDE={B ff}NEW({B ff}FOR(TEXT$,2))
150 IF STUNDE<0 OR STUNDE>23 OR MINUTE<0 OR MINUTE>59 OR SEKUNDE<0 OR SEKUNDE>59 THEN GOSUB 999:GOTO 110
160 TIME$={B ff}END(TEXT$,2)+":"+{B ff}NEXT(TEXT$,3,2)+":"+{B ff}FOR(TEXT$,2)
165 CURSOR(21,20):PRINT {B ff}DEF(40)
166 CURSOR(21,22):PRINT {B ff}DEF(60);
170 SCHALTER=2:LAENGE=6:SPALTE=21:ZEILE=20:TEXT$={B ff}END(DATE$,2)+{B ff}NEXT(DATE$,4,2)+{B ff}FOR(DATE$,2):FRAGE$="BITTE DATUM (TTMMJJ) EINGEBEN  ":GOSUB 500
180 ON KEY% GOTO 190,110,170
190 TAG={B ff}NEW({B ff}END(TEXT$,2))
200 MONAT={B ff}NEW({B ff}NEXT(TEXT$,3,2))
210 JAHR={B ff}NEW({B ff}FOR(TEXT$,2))
220 IF JAHR<0 OR JAHR>99 OR MONAT<1 OR MONAT>12 OR TAG<1 OR TAG>31 THEN GOSUB 999:GOTO 170
230 IF MONAT=2 AND {B ff}WIDTH(JAHR/4)=JAHR/4 THEN IF TAG>29 THEN GOSUB 999:GOTO 170 :ELSE GOTO 260
240 IF MONAT=2 THEN IF TAG>28 THEN GOSUB 999:GOTO 170
250 IF MONAT=4 OR MONAT=6 OR MONAT=9 OR MONAT=11 THEN IF TAG>30 THEN GOSUB 999:GOTO 170
260 DATE$={B ff}END(TEXT$,2)+"."+{B ff}NEXT(TEXT$,3,2)+"."+{B ff}FOR(TEXT$,2)
270 ZUSCHLAG={B ff}WIDTH(JAHR/4)
280 ALLETAGE=JAHR*365+TAGE(MONAT)+TAG+ZUSCHLAG
290 RESTTAGE={B ff}WIDTH((ALLETAGE/7-{B ff}WIDTH(ALLETAGE/7))*7+{F 0,0,3f,0})+1
300 SCHALTER=2:LAENGE=0:SPALTE=21:ZEILE=22:TEXT$="":FRAGE$="IST HEUTE "+TAG$(RESTTAGE)+"  (CR=ja, S1=nein) "
301 CURSOR(SPALTE,ZEILE):PRINT FRAGE$;:CURSOR 1,20:KKK$=INPUT$(1)
302 KEY%=-1:IF KKK$<>{B ff}NULL(13) THEN 301
303 CALL "lt"(@KEY%)
309 CURSOR 0
310 ON KEY%+1  GOTO 320,165,300
320 GOTO 9999
410 TEXT1$="" : TEXT2$="" : TEXT3$="" : RETURN
500 REM "*****  ACCEPT-UNTERROUTINE F]R 64*16 UND 80*25 ZEICHEN DISPLAY     *****"
510 REM
520 REM "*****  Eingabe Parameter: SCHALTER,LAENGE,WERT# bzw. TEXT$,FRAGE$  *****"
530 REM "*****  Ausgabe Parameter: WERT# bzw. TEXT$,KEY%                    *****"
540 REM "*****  Interne Variablen: KLAMMERAUF$,KLAMMERZU$                   *****"
550 IF SCHALTER=1 THEN TEXT$={B ff}LIST(WERT#)
560 IF LAENGE=0 THEN KLAMMERAUF$=" " : KLAMMERZU$=" " : GOTO 580
570 KLAMMERAUF$="<" : KLAMMERZU$=">"
580 CURSOR(SPALTE,ZEILE)
590 PRINT FRAGE$" "KLAMMERAUF$ : CURSOR (SPALTE+{B ff}CLEAR(FRAGE$)+LAENGE+2,ZEILE) : PRINT KLAMMERZU$
600 SPALTE=SPALTE+{B ff}CLEAR(FRAGE$)+2 : GOSUB 700
610 IF SCHALTER=1 THEN WERT#={B ff}NEW(TEXT$)
620 RETURN
700 REM "*****  INPUT-UNTERROUTINE F]R 80*25 ZEICHEN DISPLAY  *****"
710 REM
720 REM "*****  Eingabe Paramater: SPALTE,ZEILE,LAENGE,TEXT$  *****"
730 REM "*****  Ausgabe Parameter: TEXT$,KEY%                 *****"
740 REM "*****  Interne Variablen: POSITION,FARBE,ZEICHEN$    *****"
750 FARBE=1 : EBRAF=0 : POSITION=0 : KEY%=0 : GOSUB 850
760 KEY$=INKEY$
770 IF {B ff}CLEAR(KEY$)=0 THEN GOSUB 860 : GOTO 760
780 IF KEY$={B ff}NULL(-102) THEN GOTO 880
790 IF KEY$={B ff}NULL(-101) THEN GOTO 890
800 IF KEY$={B ff}NULL(-100) THEN GOTO 910
810 IF KEY$={B ff}NULL(-99) THEN GOTO 920
820 IF KEY$={B ff}NULL(-98) THEN GOTO 940
830 IF KEY$={B ff}NULL(13) THEN GOSUB 870 : CALL"lt"(@KEY%) : KEY%=KEY%+1 : RETURN
835 IF KEY$<{B ff}NULL(32) OR KEY$>{B ff}NULL(126) THEN GOSUB 998:GOTO 760
840 GOTO 960
850 CURSOR (SPALTE,ZEILE) : TEXT$={B ff}END(TEXT$,LAENGE) : TEXT$=TEXT$+{B ff}DEF(LAENGE-{B ff}CLEAR(TEXT$)) : PRINT TEXT$ : RETURN
860 IF POSITION<LAENGE THEN LINE (((SPALTE+POSITION)*6+2)*{F 88,a4,3f,88}-8,(25-ZEILE)*10+5)-(((SPALTE+POSITION)*6+2)*{F 88,a4,3f,88}-2,(25-ZEILE)*10+5),FARBE : SWAP FARBE,EBRAF : FOR I=1 TO -56 : NEXT
865 RETURN
870 LINE (((SPALTE+POSITION)*6+2)*{F 88,a4,3f,88}-8,(25-ZEILE)*10+5)-(((SPALTE+POSITION)*6+2)*{F 88,a4,3f,88}-2,(25-ZEILE)*10+5),0 : RETURN
880 TEXT$={B ff}END(TEXT$,POSITION)+{B ff}NEXT(TEXT$,POSITION+2)+" " : GOSUB 850 : GOTO 760
890 IF POSITION<1 THEN GOSUB 998 : GOTO 760
900 GOSUB 870 : POSITION=POSITION-1 : GOTO 760
910 GOSUB 870 : TEXT$="" : POSITION=0 : GOSUB 850 : GOTO 760
920 GOSUB 870 : IF POSITION>LAENGE-1 THEN GOSUB 998 : GOTO 760
930 POSITION=POSITION+1 : GOTO 760
940 ZEICHEN$=INKEY$ : IF {B ff}CLEAR(ZEICHEN$)=0 THEN GOSUB 860 : GOTO 940
950 GOSUB 970 : TEXT$={B ff}END(TEXT$,POSITION)+ZEICHEN$+{B ff}NEXT(TEXT$,POSITION+1) : GOSUB 850 : GOTO 920
960 ZEICHEN$=KEY$ : GOSUB 970 : TEXT$={B ff}END(TEXT$,POSITION)+ZEICHEN$+{B ff}NEXT(TEXT$,POSITION+2) : GOSUB 850 : GOTO 920
970 IF {B ff}ON(ZEICHEN$)=34 THEN ZEICHEN$="'"
980 RETURN
998 FOR KLINGEL=1 TO 20 : PRINT {B ff}NULL(7); : NEXT : RETURN
999 FOR KLINGEL=1 TO 20 : PRINT {B ff}NULL(7); : NEXT : RETURN
9999 CLS: CHAIN "uhr1"
36 